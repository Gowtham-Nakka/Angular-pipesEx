<div class="container">
  <h2>📋 Todo List</h2>

  <!-- Priority Filter -->
  <label for="priorityFilter">Filter by Priority:</label>
  <select id="priorityFilter" [(ngModel)]="selectedPriority" (change)="filterByPriority(selectedPriority)">
    <option value="ALL">All</option>
    <option value="LOW">Low</option>
    <option value="MEDIUM">Medium</option>
    <option value="HIGH">High</option>
  </select>

  <ul>
    <li *ngFor="let todo of todos">
      <input type="checkbox" [checked]="todo.markTask === 'COMPLETED'" (change)="markAsCompleted(todo)" />

      <!-- Normal view -->
      <span *ngIf="editingId !== todo.id" [ngClass]="{done: todo.markTask === 'COMPLETED'}">
        {{ todo.taskDesc }} - <b>{{ todo.priority }}</b>
      </span>

      <!-- Edit mode -->
      <input *ngIf="editingId === todo.id" type="text" [(ngModel)]="editText" />

      <!-- Buttons -->
      <button *ngIf="editingId !== todo.id" (click)="startEdit(todo)">✏️ Edit</button>
      <button *ngIf="editingId === todo.id" (click)="saveEdit(todo)">💾 Save</button>
      <button *ngIf="editingId === todo.id" (click)="cancelEdit()">❌ Cancel</button>
      <button (click)="deleteTask(todo.id!)">🗑️ Delete</button>
    </li>
  </ul>
</div>
